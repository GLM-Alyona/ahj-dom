(()=>{"use strict";const t=document.getElementById("taskOne");new class{constructor(t){this.element=t,this.fieldSize=4,this.lastCell=0,this.hits=0,this.misses=0}init(){this.createHtml(this.element),this.timerID=setInterval(this.goblinActive.bind(this),1e3)}createHtml(t){this.test=t,t.insertAdjacentHTML("afterBegin",'\n        <H2>\n          Задача № 1<br>\n          Перемещение элемента.\n        </H2>\n        <div class="points">Попаданий: <span>0</span></div>\n        <div class="points">Промахов: <span>0</span></div>\n      '),this.pointer=Array.from(t.querySelectorAll(".points > span")),this.board=document.createElement("div"),this.board.classList.add("board"),t.appendChild(this.board),t.insertAdjacentHTML("beforeEnd","<button>Очистить статистику</button>"),this.button=this.element.querySelector("button"),this.button.addEventListener("click",(t=>{t.preventDefault(),this.buttonClearPoints()}));for(let t=0;t<this.fieldSize**2;t+=1){const t=document.createElement("div");t.classList.add("cell"),t.addEventListener("click",(t=>this.clickCell(t))),this.board.appendChild(t)}this.cells=Array.from(this.element.querySelectorAll(".cell"))}goblinActive(){this.cells[this.lastCell].classList.remove("active");const t=()=>{const e=Math.floor(Math.random()*this.fieldSize**2);return e===this.lastCell?t():(this.lastCell=e,e)},e=t();this.cells[e].classList.add("active")}clickCell(t){t.preventDefault();const e=this.cells.indexOf(t.currentTarget),i=this.cells[e].classList.contains("active");i&&(this.hits+=1,this.pointer[0].textContent=this.hits),i||(this.misses+=1,this.pointer[1].textContent=this.misses)}buttonClearPoints(){this.pointer.forEach((t=>{t.textContent=0})),this.hits=0,this.misses=0}}(t).init();const e=document.getElementById("taskTwo");new class{constructor(t){this.element=t,this.responce=[{id:26,title:"Побег из Шоушенка",imdb:9.3,year:1994},{id:25,title:"Крёстный отец",imdb:9.2,year:1972},{id:27,title:"Крёстный отец 2",imdb:9,year:1974},{id:1047,title:"Тёмный рыцарь",imdb:9,year:2008},{id:223,title:"Криминальное чтиво",imdb:8.9,year:1994}],this.sortingID=0,this.sortingTitle=0,this.sortingYear=0,this.sortingImdb=0,this.buttonCondition=0,this.intervalCount=0}init(){this.createHtml(this.element),this.eventButton(),this.timerID=setInterval(this.intervalSorting.bind(this),2e3)}createHtml(t){const{responce:e}=this;t.insertAdjacentHTML("afterBegin","\n        <H2>\n          Задача № 2<br>\n          Loading and Sorting, data-attributes (задача со звёздочкой)\n        </H2>\n      "),this.table=document.createElement("table"),t.appendChild(this.table),t.insertAdjacentHTML("beforeEnd","<button>Остановить интервал</button>"),this.header=document.createElement("tr"),this.header.innerHTML="\n        <th>id</th>\n        <th>title</th>\n        <th>year</th>\n        <th>imdb</th>\n      ",this.th=Array.from(this.header.querySelectorAll("th")),this.table.appendChild(this.header);for(let t=0;t<e.length;t+=1){const{id:i,title:n,year:s,imdb:r}=e[t],h=document.createElement("tr");h.dataset.id=i,h.dataset.title=n,h.dataset.year=s,h.dataset.imdb=r,h.innerHTML=`\n          <td>${i}</td>\n          <td>${n}</td>\n          <td>(${s})</td>\n          <td>imdb: ${r.toFixed(2)}</td>\n        `,this.table.appendChild(h)}}sortFunc(t,e){this.headerClear();const i=Array.from(this.table.querySelectorAll("tr[data-id]")),n=this.th.findIndex((t=>t.textContent===e));let s="number";for(let t=0;t<this.responce.length;t+=1)"string"==typeof this.responce[t][e]&&(s="string");return"number"===s&&(0===t&&(i.sort(((t,i)=>t.dataset[e]-i.dataset[e])),this.th[n].textContent+=" ↑"),1===t&&(i.sort(((t,i)=>i.dataset[e]-t.dataset[e])),this.th[n].textContent+=" ↓")),"string"===s&&(0===t&&(i.sort(((t,i)=>t.dataset[e]>i.dataset[e]?1:t.dataset[e]<i.dataset[e]?-1:0)),this.th[n].textContent+=" ↑"),1===t&&(i.sort(((t,i)=>t.dataset[e]>i.dataset[e]?-1:t.dataset[e]<i.dataset[e]?1:0)),this.th[n].textContent+=" ↓")),this.rendering(i),0===t?1:0}sortID(){this.sortingID=this.sortFunc(this.sortingID,"id")}sortTitle(){this.sortingTitle=this.sortFunc(this.sortingTitle,"title")}sortYear(){this.sortingYear=this.sortFunc(this.sortingYear,"year")}sortImdb(){this.sortingImdb=this.sortFunc(this.sortingImdb,"imdb")}headerClear(){this.th[0].textContent="id",this.th[1].textContent="title",this.th[2].textContent="year",this.th[3].textContent="imdb"}rendering(t){this.table.innerHTML="",this.table.appendChild(this.header);for(let e=0;e<t.length;e+=1)this.table.appendChild(t[e])}intervalSorting(){this.intervalCount>7&&(this.intervalCount=0),0===this.intervalCount&&this.sortID(),1===this.intervalCount&&this.sortID(),2===this.intervalCount&&this.sortTitle(),3===this.intervalCount&&this.sortTitle(),4===this.intervalCount&&this.sortYear(),5===this.intervalCount&&this.sortYear(),6===this.intervalCount&&this.sortImdb(),7===this.intervalCount&&this.sortImdb(),this.intervalCount+=1}buttonSetInterval(){0===this.buttonCondition&&(clearInterval(this.timerID),this.button.textContent="Запустить интервал"),1===this.buttonCondition&&(this.intervalCount=0,this.timerID=setInterval(this.intervalSorting,2e3),this.button.textContent="Остановить интервал"),this.buttonCondition=0===this.buttonCondition?1:0}eventButton(){this.th[0].addEventListener("click",(t=>{t.preventDefault(),this.sortID()})),this.th[1].addEventListener("click",(t=>{t.preventDefault(),this.sortTitle()})),this.th[2].addEventListener("click",(t=>{t.preventDefault(),this.sortYear()})),this.th[3].addEventListener("click",(t=>{t.preventDefault(),this.sortImdb()})),this.button=this.element.querySelector("button"),this.button.addEventListener("click",(t=>{t.preventDefault(),this.buttonSetInterval()}))}}(e).init();const i=document.getElementById("taskThree");new class{constructor(t){this.element=t,this.responce=[{id:26,title:"Побег из Шоушенка",imdb:9.3,year:1994},{id:25,title:"Крёстный отец",imdb:9.2,year:1972},{id:27,title:"Крёстный отец 2",imdb:9,year:1974},{id:1047,title:"Тёмный рыцарь",imdb:9,year:2008},{id:223,title:"Криминальное чтиво",imdb:8.9,year:1994}],this.sortingID=0,this.sortingTitle=0,this.sortingYear=0,this.sortingImdb=0,this.buttonCondition=0,this.intervalCount=0}init(){this.createHtml(this.element),this.eventButton(),this.timerID=setInterval(this.intervalSorting.bind(this),2e3)}createHtml(t){t.insertAdjacentHTML("afterBegin","\n        <H2>\n          Задача № 3<br>\n          In-Memory Sorting (задача со звёздочкой)\n        </H2>\n      "),this.table=document.createElement("table"),t.appendChild(this.table),t.insertAdjacentHTML("beforeEnd","<button>Остановить интервал</button>"),this.header=document.createElement("tr"),this.header.innerHTML="\n        <th>id</th>\n        <th>title</th>\n        <th>year</th>\n        <th>imdb</th>\n      ",this.th=Array.from(this.header.querySelectorAll("th")),this.addTableRows()}addTableRows(){const{responce:t}=this;this.table.innerHTML="",this.table.appendChild(this.header);for(let e=0;e<t.length;e+=1){const{id:i,title:n,year:s,imdb:r}=t[e],h=document.createElement("tr");h.innerHTML=`\n          <td>${i}</td>\n          <td>${n}</td>\n          <td>(${s})</td>\n          <td>imdb: ${r.toFixed(2)}</td>\n        `,this.table.appendChild(h)}}sortFunc(t,e){this.headerClear();const i=this.th.findIndex((t=>t.textContent===e));let n="number";for(let t=0;t<this.responce.length;t+=1)"string"==typeof this.responce[t][e]&&(n="string");return"number"===n&&(0===t&&(this.responce.sort(((t,i)=>t[e]-i[e])),this.th[i].textContent+=" ↑"),1===t&&(this.responce.sort(((t,i)=>i[e]-t[e])),this.th[i].textContent+=" ↓")),"string"===n&&(0===t&&(this.responce.sort(((t,i)=>t[e]>i[e]?1:t[e]<i[e]?-1:0)),this.th[i].textContent+=" ↑"),1===t&&(this.responce.sort(((t,i)=>t[e]>i[e]?-1:t[e]<i[e]?1:0)),this.th[i].textContent+=" ↓")),0===t?1:0}sortID(){this.sortingID=this.sortFunc(this.sortingID,"id"),this.addTableRows()}sortTitle(){this.sortingTitle=this.sortFunc(this.sortingTitle,"title"),this.addTableRows()}sortYear(){this.sortingYear=this.sortFunc(this.sortingYear,"year"),this.addTableRows()}sortImdb(){this.sortingImdb=this.sortFunc(this.sortingImdb,"imdb"),this.addTableRows()}eventButton(){this.th[0].addEventListener("click",(t=>{t.preventDefault(),this.sortID()})),this.th[1].addEventListener("click",(t=>{t.preventDefault(),this.sortTitle()})),this.th[2].addEventListener("click",(t=>{t.preventDefault(),this.sortYear()})),this.th[3].addEventListener("click",(t=>{t.preventDefault(),this.sortImdb()})),this.button=this.element.querySelector("button"),this.button.addEventListener("click",(t=>{t.preventDefault(),this.buttonSetInterval()}))}headerClear(){this.th[0].textContent="id",this.th[1].textContent="title",this.th[2].textContent="year",this.th[3].textContent="imdb"}intervalSorting(){this.intervalCount>7&&(this.intervalCount=0),0===this.intervalCount&&this.sortID(),1===this.intervalCount&&this.sortID(),2===this.intervalCount&&this.sortTitle(),3===this.intervalCount&&this.sortTitle(),4===this.intervalCount&&this.sortYear(),5===this.intervalCount&&this.sortYear(),6===this.intervalCount&&this.sortImdb(),7===this.intervalCount&&this.sortImdb(),this.intervalCount+=1}buttonSetInterval(){0===this.buttonCondition&&(clearInterval(this.timerID),this.button.textContent="Запустить интервал"),1===this.buttonCondition&&(this.intervalCount=0,this.timerID=setInterval(this.intervalSorting,2e3),this.button.textContent="Остановить интервал"),this.buttonCondition=0===this.buttonCondition?1:0}}(i).init(),console.log("app started")})();